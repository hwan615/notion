두가지 package manager yarn 과 npm 의 차이점에 대하여 알아보자.

npm install

프로젝트를 하면서 정말 많이 입력하는 코드이지만 그것에 대해
정확하게 알고 사용하지는 않았던 것 같다.
먼저, npm 이란 node package manager, 즉 패키지를 관리해주는 것이다.
그렇다면 npm 과 yarn 을 다음 4가지 측면에서 비교해보자

1. 퍼포먼스
2. 안전성
3. 보안성

1. 퍼포먼스(속도)
사실상 릴리즈 속도에는 큰 차이는 없다
2. 안정성
둘다 수억의 다운로드로 검증되었기 때문에 안전하다고 말할 수 있다.
3. 보안성
npm 은 패키지가 설치될 때 자동으로 코드와 의존성을 실행할 수 있도록 허용했다.
이는 편리하나 안전성의 위험도를 증가시켰다.
반면에 yarn 은 yarn.lock 이나 package.json 으로 부터 설치만 한다.


package.json / package-lock.json?

package-lock.json 이 생성되는 이유는 package.json 만으로는 정보가 부족하기 때문이다.
package.json 은 버전정보를 저장할 때 version range 를 사용한다.

- 1.4.0: 정확하게 1.4.0버전
- >1.4.0 : 넘버링이 1.4.0보다 큰 버전
- <1.4.0: 넘버링이 1.4.0보다 작은 버전
- >=1.4.0 : 넘버링이 1.4.0보다 크거나 같은 버전
- <=1.4.0 : 넘버링이 1.4.0보다 작거나 같은 버전
- 1.4.0 || >= 2.4.0 : 정확하게 1.4.0버전이거나, 넘버링이 2.4.0보다 같거나 큰 모든 버전

왜 이렇게 저장할까? 그냥 패키지를 지정해놓으면 될텐데

이것은 패키지들이 업데이트 등으로 변경 되었을 때 매번 package.json 을 수정해주어야 하기 때문이다. 모든 크고 작은 패키지들의 릴리즈 정보를 항상 추적하고 수정해야한다면 엄청난 귀찮음이 몰려올 것이다. 이를 방지하기 위해서 range 정보를 적는것이다.
하지만, 이것은 또 다른 문제를 가져오는데, 바로 버젼이 정확히 명시되어 있지 않기 때문에 프로젝트 구성원들이 다른 시점에서 npm 을 받고 실행 했을 경우, 패키지 버전이 다른 것 때문에 코드가 내가 테스트 했던 시점과 다르게 돌아갈 수 있다는 점이다.
이를 방지하기 위해서 태어난 것이 package-lock.json 이다.
package-lock.json 은 npm install 시에 정확하고 구체적인 정보를 품고 자동으로 생성된다. package-lock.json 이 존재할 때에 npm install 은 package.json 이 아닌 package-lock.json 을 통해서 node-modules 를 생성하기 때문에 package-lock.json 을 함께 올리는 것을 통해서 개발자들이 서로 동일한 의존성을 설치 할 수 있도록 도와준다.